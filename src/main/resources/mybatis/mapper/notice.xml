<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.samgyeobsal.mapper.NoticeMapper">
    <select id="getNoticeList" resultType="notice">
        select * from(select nid ,ntitle, to_char(ndate,'YYYY.MM.DD') ndate, 'NOTICE' nstatus ,nthumb from notice
        union
        select to_char(eid) , etitle , to_char(eissuedate,'YYYY.MM.DD') ,'EVENT' ,ethumb from event)

        <choose>
            <when test="status =='notice'.toString()">
                where nstatus='NOTICE'
            </when>
            <when test="status =='event'.toString()">
                where nstatus='EVENT'
            </when>
            <otherwise>
            </otherwise>
        </choose>
    </select>

    <select id="getNoticeDetail" resultType="notice">
        select nid, ntitle, to_char(ndate,'YYYY.MM.DD') ndate, ncontent from notice
        where  nid = #{nid}
    </select>

    <select id="getEventDetail" resultType="notice">
        select eid nid, etitle ntitle, to_char(eissuedate,'YYYY.MM.DD') ndate, econtent ncontent from event
        where eid = #{eid}
    </select>

</mapper>