<html lang="ko" class="scroll-top scroll-apex" translate="no">
  <head>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,viewport-fit=cover" />
    <meta
      name="description"
      content="테크, 패션, 푸드, 뷰티, 홈리빙까지. 와디즈 펀딩으로 매일 새로운 일상을 발견하고, 와디즈 스토어에서 새로운 쇼핑을 만나보세요." />
    <title>결제 예약</title>
    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
    <script src="https://js.tosspayments.com/v1/payment"></script>
    <link
      rel="shortcut icon"
      href="https://static.wadiz.kr/assets/icon/favicon.ico" />
    <link
      rel="icon"
      href="https://static.wadiz.kr/assets/icon/favicon-16x16.png"
      sizes="16x16"
      type="image/png" />
    <link
      rel="icon"
      href="https://static.wadiz.kr/assets/icon/favicon-32x32.png"
      sizes="32x32"
      type="image/png" />

    <link
      rel="stylesheet"
      href="/import/css/wui.css" />
    <link
      rel="stylesheet"
      href="/import/css/common.css" />
    <link
      rel="stylesheet"
      href="/import/css/layout.css" />
    <script
      type="text/javascript"
      src="/import/js/vendor.js"></script>
    <script
      type="text/javascript"
      src="/import/js/layout.js"></script>

    <script
      type="text/javascript"
      src="/import/js/wCommon.js"></script>

    <script
      type="text/javascript"
      src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>


    <link
      rel="stylesheet"
      href="/import/css/payments.562cdee9.css" />

    <link
      rel="stylesheet"
      href="/import/css/common.css" />
    <link
      rel="stylesheet"
      href="/import/css/wpurchase_reward.css" />
    <!-- 리워드결제페이지 -->
    <style>
      .inner-terms .bold {
        font-weight: bold;
      }
      .terms-table {
        width: 100%;
        table-layout: fixed;
        border-spacing: 0;
        border-collapse: collaspse;
        border: 1px solid #ddd;
      }
      .terms-table td {
        padding: 10px;
        border: 1px solid #ddd;
        font-size: 12px;
      }
      .no-border {
        border-bottom: 0;
      }
    </style>


    <script
      type="text/javascript"
      src="/import/js/wCommon.js"></script>
    <script
      type="text/javascript"
      src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

  </head>
  <body>
    <div id="page-container">
      <div class="black-bg-wrap" style="display: none"></div>

      <div id="wz-header">
        <div th:replace="/fragment/header__1TR2D.html :: header"></div>

      </div>


      <form id="forwardForm" method="get">
        <input type="hidden" id="returnURL" name="returnURL" />
      </form>
      <input type="hidden" id="sessionLoginCheck" value="true" />

      <div id="newContainer">
        <div id="wPurchaseWrap" class="funding-purchase">
          <div class="wpurchase-title">
            <a class="btn-move-to-story" href="/web/campaign/detail/158604"
              ><i class="wadizicon wa-chevron-left"></i
              ><span>스토리로 돌아가기</span></a
            >
            <h2>
              개발비 1.5억ㅣ현대리바트 기술력 담아낸 3만원대 발 받침대
              Comfy<span class="name"
                ><em
                  style="
                    background-image: url(https://cdn.wadiz.kr/wwwwadiz/green001/2023/0208/20230208171549898_158604.png/wadiz/resize/600/format/jpg/quality/80/optimize);
                  "></em
                >현대리바트</span
              >
            </h2>
          </div>
          <div class="wpurchase-wrap">
            <div class="wpurchase-step">
              <ol>
                <li>
                  <em>리워드<br />선택</em>
                </li>
                <li class="active"><em>결제 예약</em></li>
                <li><em>소문내기</em></li>
              </ol>
            </div>
            <form name="purchaseForm" id="purchaseForm" method="post">
              <input
                type="hidden"
                id="campaignId"
                name="campaignId"
                value="158604" />
              <input type="hidden" id="presenteeName" name="presenteeName" />
              <input type="hidden" id="contactNumber" name="contactNumber" />
              <input type="hidden" id="zipCode" name="zipCode" />
              <input type="hidden" id="address" name="address" />
              <input type="hidden" id="addressDetails" name="addressDetails" />
              <input
                type="hidden"
                id="applyPoint"
                name="applyPoint"
                value="0" />
              <input
                type="hidden"
                id="email"
                name="email"
                value="wangjh789@gmail.com" />
              <input
                type="hidden"
                id="addDonation"
                name="addDonation"
                value="0" />
              <input
                type="hidden"
                id="dontShowNameYn"
                name="dontShowNameYn"
                value="Y" />
              <input
                type="hidden"
                id="dontShowAmountYn"
                name="dontShowAmountYn"
                value="Y" />
              <input
                type="hidden"
                name="secureStateBagKey"
                value="OWZkOTcyMTYtYTJkYi00MWI3LWI5YTktZjdmZDA3NzdiZGVkWmpFNVl6SXlZakF0TjJOaFlTMDBOVEEwTFdFME5UZ3RaV1k0TXpFd1l6WTBNell5" />
              <input
                type="hidden"
                id="inputCouponKey"
                name="couponKey"
                value="" />
              <input
                type="hidden"
                id="inputCouponDiscountAmount"
                name="couponDiscountAmount"
                value="0" />
              <input type="hidden" name="fundingPrice" value="42000" />

              <div class="wpurchase-order">
                <div class="order-list" data-choiced-legnth="1">
                  <ul th:each="order:${order.orderList}">
                    <li>
                      <p class="title">
                        [[${order.fptitle}]]
                      </p>
                      <p class="text">
                        [[${order.fpcontent}]]
                      </p>
                      <div class="info">
                        <div class="option">
                          <span class="option-section-header">옵션-</span>
                          <span>
                            <!-- 이전 SELECT 타입, N옵션 타입 일경우(SELECT, OPTION) -->
                            <th:block th:each="detail:${order.orderListDetail}">[[${detail.pooption}]] ([[${detail.amount}]]개)<br></th:block>
                          </span>
                        </div>

                        <p class="sum"><em>수량 : [[${order.sumamount}]]개</em>[[${#numbers.formatInteger(order.sumprice, 3, 'COMMA')}]]원</p>
                      </div>
                    </li>
                    <input
                      type="hidden"
                      name="choiceRewards[0].rewardId"
                      value="411146" />
                    <input
                      type="hidden"
                      name="choiceRewards[0].rewardName"
                      value="★ 얼리버드 한정수량 혜택 ★
  정가 대비 39% 혜택 + 무료 배송
  
  COMFY  2단 쿠션 발받침대
  그레이-그레이, 그레이-그린, 화이트-베이지 中  택1" />
                    <input
                      type="hidden"
                      name="choiceRewards[0].qty"
                      value="1" />
                    <input
                      type="hidden"
                      name="choiceRewards[0].sumAmount"
                      value="42000" />
                    <input
                      type="hidden"
                      name="choiceRewards[0].memo"
                      value="" />

                    <input
                      type="hidden"
                      name="choiceRewards[0].choiceRewardOptions[0].rewardOptionId"
                      value="127464" />
                    <input
                      type="hidden"
                      name="choiceRewards[0].choiceRewardOptions[0].qty"
                      value="1" />
                  </ul>
                </div>
                <div class="order-addinfo">
                  <div class="point">
                    <dl id="coupon-field" class="disabled">
                      <dt>
                        쿠폰 사용
                        <button class="wz tooltip mini" type="button">
                          <span class="tooltip-message" role="tooltip">
                            쿠폰은 추가 후원금, 배송비가 제외된 리워드 금액을
                            기준으로 사용 가능 여부가 결정됩니다.
                            <a
                              class="link"
                              href="http://bit.ly/2HpqtWW"
                              target="_blank">
                              자세히 보기
                            </a>
                          </span>
                        </button>
                      </dt>
                      <dd>
                        <p class="text">사용가능한 쿠폰이 없습니다.</p>
                        <label class="wz dense outline dropdown"
                          ><span></span>
                          <select id="couponSelect"></select>
                        </label>
                      </dd>
                    </dl>
                    <dl>
                      <dt>포인트 사용</dt>
                      <dd>
                        <label class="wz checkbox">
                          <input type="checkbox" id="ckptAll" /><span
                            >모두 사용 (보유 포인트
                            <span id="usablePoint">1000</span>P)</span
                          >
                        </label>
                        <input
                          type="text"
                          id="pointInput"
                          class="numOnly pointInput"
                          maxlength="8"
                          disabled="disabled" />
                      </dd>
                    </dl>
                    <input type="hidden" id="limitPoint" value="0" />
                  </div>
                </div>
                <div
                  id="reward-funding-price-app"
                  data-discount-shipping-charge="0"
                  data-funding-price="42000"
                  data-add-donation="0"
                  data-shipping-charge="0">
                  <h4 class="BasePrice_title__24p94">결제 예약 금액</h4>
                  <div class="DefaultPrice_container__4dYox">
                    <div class="DefaultPrice_title__3Qs3N">
                      <label
                        class="Radio_radio__1S1J3 Radio_md__36Y-U DefaultPrice_radioButton__2HF50"
                        ><input
                          type="radio"
                          name="price"
                          readonly=""
                          value="DEFAULT"
                          checked="" /><span class="Radio_icon__gDAhN"></span
                        ><span class="Radio_label__3LIYq"></span></label
                      >일반 금액
                    </div>
                    <div class="TitleValuePrice_container__2tb72">
                      <dl class="">
                        <dt>리워드 금액</dt>
                        <dd>
                          <span
                            ><em class="TitleValuePrice_money__2q48W">[[${#numbers.formatInteger(order.totalprice, 3, 'COMMA')}]]</em
                            >원</span
                          >
                        </dd>
                      </dl>
                    </div>
                    <div class="TitleValuePrice_container__2tb72">
                      <dl class="">
                        <dt>쿠폰 차감금액</dt>
                        <dd>
                          <span class="TitleValuePrice_danger__3Sy33"
                            >0 원</span
                          >
                        </dd>
                      </dl>
                    </div>
                    <div class="TitleValuePrice_container__2tb72">
                      <dl class="">
                        <dt>포인트 차감금액</dt>
                        <dd>
                          <span class="TitleValuePrice_danger__3Sy33"
                            >0 원</span
                          >
                        </dd>
                      </dl>
                    </div>
                    <div class="TitleValuePrice_container__2tb72">
                      <hr class="TitleValuePrice_divide__-8plx" />
                      <dl class="TitleValuePrice_total__2cGge">
                        <dt>최종 결제 금액</dt>
                        <dd>
                          <span><em class="">(쿠폰/포인트 들어오면 jquery) 원</em></span>
                        </dd>
                      </dl>
                    </div>
                  </div>
                  <input type="hidden" id="totalPrice" value="42000" />
                </div>
              </div>

              <div class="payment-info-container">
                <!-- 결제 정보 (간편결제 / 직접입력) 앱 -->
                <div
                  id="reward-simplepay-app"
                  data-type="purchase"
                  data-is-donation-category="false"
                  data-recent-payment-type="sbcredit"
                  data-is-preorder-type="false"
                  data-is-available-installment="false"
                  style="margin-bottom: 0px">
                  <h3 class="SimplePayContainer_title__1AD2x">결제 정보</h3>
                  <div
                    class="SimplePayPurchase_simplePayPurchase__3IMEe"
                    data-selected-pay-type="sbcredit">
                    <div class="SimplePayPurchase_payType__277Y0">
                      <div class="SimplePayPurchase_radioContainer__3LKI_">
                        <label
                          class="Radio_radio__1S1J3 Radio_md__36Y-U Radio_labeled__1V1EY SimplePayPurchase_radio__3vJtq"
                          ><input
                            type="radio"
                            value="sbcredit"
                            checked="" /><span class="Radio_icon__gDAhN"></span
                          ><span class="Radio_label__3LIYq"
                            ><div class="SimplePayPurchase_radioLabel__2-EE1">
                              <svg
                                viewBox="0 0 40 40"
                                focusable="false"
                                role="presentation"
                                class="withIcon_icon__2cPeY SimplePayPurchase_icon__2f9jv"
                                aria-hidden="true">
                                <path
                                  d="M38.32 26.87v-13h-1.88a1.73 1.73 0 0 0-1.73 1.59A6.82 6.82 0 0 0 23.26 20a6.67 6.67 0 0 0 2.45 5.61 8 8 0 0 0 9.74.25 1.56 1.56 0 0 0 1.47 1l1.4.01zm-7.49-2.39a3.88 3.88 0 0 1-3.72-4 3.88 3.88 0 0 1 3.72-4 3.88 3.88 0 0 1 3.72 4 3.88 3.88 0 0 1-3.72 4zM19.77 13.86L17.14 22l-2.65-8.1H11.9a1.73 1.73 0 0 0-1.65 1.2L8 22l-2.63-8.1H1.68L6 26.87h3.7l2.87-8.35 2.86 8.35h3.7l4.33-13-3.69-.01z"></path></svg
                              ><span>와디즈 간편결제</span>
                            </div></span
                          ></label
                        ><span
                          class="SimplePayPurchase_badge__3NIVz SimplePayPurchase_simplePayBadge__1Px25"
                          >가장 빠른 결제 예약</span
                        >
                      </div>
                      <div
                        class="SimplePayCard_simplecard__1bVno SimplePayCard_purchase__2GiS0 SimplePayCard_noInfo__UZVmq">
                        <div class="SimplePayCard_unregisted___0bUq">
                          <div class="SimplePayCard_addCard__yGCMH">
                            <svg
                              viewBox="0 0 32 32"
                              focusable="false"
                              role="presentation"
                              class="withIcon_icon__2cPeY SimplePayCard_addIcon__2u85G"
                              aria-hidden="true">
                              <path
                                d="M30.4 15.2H16.8V1.6h-1.6v13.6H1.6v1.6h13.6v13.6h1.6V16.8h13.6v-1.6z"></path></svg
                            ><span class="SimplePayCard_title__2wkPB"
                              >간편 결제 카드 등록</span
                            ><span class="SimplePayCard_description__13HJh"
                              >카드 등록하고, 빠르게 결제 예약하세요!</span
                            >
                          </div>
                          <div class="SimplePayCard_notice__gpsgQ">
                            <i class="icon error-o"></i
                            ><em>와디즈에서 카드번호를 저장하지 않습니다!</em>
                            <p>
                              카드사에서 제공하는 암호화된 정보만을 저장하기
                              때문에 안심하셔도 됩니다.
                            </p>
                          </div>
                        </div>
                        <div class="SimplePayCard_registed__EtapQ">
                          <div class="SimplePayCard_creditCard__ytBmr">
                            <span class="SimplePayCard_cardName__1d4sO"
                              >카드</span
                            ><button
                              type="button"
                              class="SimplePayCard_editButton__2PlF7">
                              변경
                            </button>
                            <div class="SimplePayCard_cardNumber__b42bv"></div>
                            <span class="SimplePayCard_createdAt__1NOc7"
                              >간편 결제 등록일<span>YYYY. MM. DD</span></span
                            >
                          </div>
                          <div class="SimplePayCard_notice__gpsgQ">
                            <em>할부는 직접 입력으로만 이용 가능합니다.</em>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="SimplePayPurchase_payType__277Y0">
                      <div class="SimplePayPurchase_radioContainer__3LKI_">
                        <label
                          class="Radio_radio__1S1J3 Radio_md__36Y-U Radio_labeled__1V1EY SimplePayPurchase_radio__3vJtq"
                          ><input
                            type="radio"
                            name="radio"
                            value="dbcredit" /><span
                            class="Radio_icon__gDAhN"></span
                          ><span class="Radio_label__3LIYq"
                            >직접입력</span
                          ></label
                        ><span
                          class="Badge_container__16KN_ Badge_visible__2jFR_ SimplePayPurchase_badge__3NIVz"
                          ><span
                            class="Badge_badge__23sNq Badge_label__1ER2E Badge_md__1aw8X Badge_secondary__4v3LL Badge_circular__2WqPQ Badge_tertiary__34CN6"
                            >할부 가능</span
                          ></span
                        >
                      </div>
                    </div>
                    <div class="SimplePayPurchase_payType__277Y0">
                      <div class="SimplePayPurchase_radioContainer__3LKI_">
                        <label
                          class="Radio_radio__1S1J3 Radio_md__36Y-U Radio_labeled__1V1EY SimplePayPurchase_radio__3vJtq"
                          ><input type="radio" name="radio" value="npay" /><span
                            class="Radio_icon__gDAhN"></span
                          ><span class="Radio_label__3LIYq"
                            >네이버페이</span
                          ></label
                        ><span
                          class="Badge_container__16KN_ Badge_visible__2jFR_ SimplePayPurchase_badge__3NIVz"
                          ><span
                            class="Badge_badge__23sNq Badge_label__1ER2E Badge_md__1aw8X Badge_primary__2cRAc Badge_circular__2WqPQ Badge_tertiary__34CN6"
                            >1% 적립</span
                          ></span
                        >
                      </div>
                    </div>
                  </div>
                  <input
                    type="hidden"
                    name="has-simplepay-info"
                    value="false" />
                </div>
                <!-- 결제 예약시 유의사항 -->
                <div id="wpurchaseReserveNotice" class="wpurchase-notice">
                  <p class="title">결제 예약시 유의사항</p>
                  <ul>
                    <li>
                      결제실행일에 결제자 귀책사유(한도초과, 이용정지 등)로
                      인하여 결제가 실패할 수 있으니, 결제수단이 유효한지 한번
                      확인하세요.
                    </li>
                    <li>
                      1차 결제 실패 시 실패일로부터 3 영업일 동안 재 결제를
                      실행합니다.
                    </li>
                    <li>
                      결제 예약 이후, 결제 정보를 변경하려면 마이페이지 &gt;
                      참여 내역 상세에서 결제 정보를 변경해주세요.
                    </li>
                  </ul>
                </div>
              </div>
            </form>

            <div class="wpurchase-terms wpurchase-terms-section">
              <h3><em>약관 동의</em></h3>
              <div class="terms-notice-box">
                <label class="wz checkbox circular doing-all-agree">
                  <input
                    id="acceptAllCheckBox"
                    class="notice-confirm-checkbox"
                    type="checkbox"
                    name="check1"
                    value="Y"
                    autocomplete="off"
                    onchange="acceptAllChanged(this)" />
                  <span>전체 동의하기</span>
                </label>
                <div id="eachTermsNoticeWrap">
                  <div class="term-checkbox-wrap">
                    <label class="wz checkbox circular">
                      <input
                        id="personalInfoAgreementForThirdPartiesCheckBox"
                        class="notice-confirm-checkbox"
                        type="checkbox"
                        name="check1"
                        value="Y"
                        autocomplete="off"
                        onchange="eachTermsChanged()" />
                      <span>개인정보 제3자 제공 동의</span>
                    </label>
                    <span
                      class="show-term"
                      onclick="showLyPop('personalInfoAgreementForThirdParties');"
                      >보기</span
                    >
                    <div
                      id="personalInfoAgreementForThirdPartiesLypop"
                      class="agree-popup"
                      style="display: none">
                      <div class="agree-popup-header">
                        <h4>개인정보 제3자 제공 동의</h4>
                      </div>
                      <div class="agree-popup-body">
                        <p>
                          '펀딩하기・구매예약하기'를 통한 결제 및 리워드 전달
                          서비스를 제공하기 위해, 이용자의 사전 동의 아래
                          제3자(프로젝트 메이커)에게 제공합니다.<br />
                          메이커에게 전달되는 개인 정보는 기재된 목적 달성 후
                          파기에 대한 책임이 메이커에게 있으며, 파기하지 않아
                          생기는 문제에 대한 법적 책임은 메이커에게 있습니다.<br />
                          아래 내용에 대하여 동의를 거부하실 수 있으며, 거부 시
                          서비스 이용이 제한됩니다. <br /><br />
                        </p>
                        <p class="bold">개인정보 제3자 제공 내역</p>
                        <table class="">
                          <colgroup>
                            <col width="30%" />
                            <col width="70%" />
                          </colgroup>
                          <tbody>
                            <tr>
                              <th>제공받는자</th>
                              <td class="bold">(주)현대리바트</td>
                            </tr>
                            <tr>
                              <th>목적</th>
                              <td class="bold">
                                프로젝트 참여 정보 확인 및 발송, 리워드 발송과
                                관련된 공지 및 민원처리
                              </td>
                            </tr>
                            <tr>
                              <th>항목</th>
                              <td>
                                서포터 정보(이름, 이메일, 휴대폰 번호), 수취인
                                정보(이름, 휴대폰 번호, 주소, 배송 시 요청사항)
                              </td>
                            </tr>
                            <tr>
                              <th>제공받는 자의 보유 및 이용 기간</th>
                              <td class="bold">프로젝트 종료 후 1년</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="agree-popup-footer">
                        <button
                          type="button"
                          class="wz button less primary"
                          onclick="closeAgreePopup('personalInfoAgreementForThirdParties');">
                          확인
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="term-checkbox-wrap">
                    <label class="wz checkbox circular">
                      <input
                        id="AcceptanceOfLiabilityCheckBox"
                        class="notice-confirm-checkbox"
                        type="checkbox"
                        name="check1"
                        value="Y"
                        autocomplete="off"
                        onchange="eachTermsChanged()" />
                      <span>책임 규정에 대한 동의</span>
                    </label>
                    <span
                      class="show-term"
                      onclick="showLyPop('AcceptanceOfLiability');"
                      >보기</span
                    >
                    <div
                      id="AcceptanceOfLiabilityLypop"
                      class="agree-popup"
                      style="display: none">
                      <div class="agree-popup-header">
                        <h4>책임 규정에 대한 동의</h4>
                      </div>
                      <div class="agree-popup-body">
                        <p>
                          와디즈는 플랫폼을 제공하는 중개자로
                          펀딩하기・예약구매하기를 받는 당사자가 아닙니다.
                          보상품 제공 등에 관한 지연, 제품의 하자 등으로 인한
                          일체의 법적책임은 펀딩하기・예약구매하기를 받는
                          프로젝트 개설자가 부담합니다. 하지만, 와디즈는
                          프로젝트 진행자와 후원자간의 원활한 의사소통을 위해
                          최선의 노력을 다하고 있습니다.
                        </p>
                      </div>
                      <div class="agree-popup-footer">
                        <button
                          type="button"
                          class="wz button less primary"
                          onclick="closeAgreePopup('AcceptanceOfLiability');">
                          확인
                        </button>
                      </div>
                    </div>
                  </div>
                  <div
                    class="term-checkbox-wrap electronicFinancialTransactionWrap"
                    style="display: none">
                    <label class="wz checkbox circular"></label>
                    <span
                      class="show-term"
                      onclick="showLyPop('electronicFinancialTransaction');"
                      >보기</span
                    >
                    <div
                      id="electronicFinancialTransactionLypop"
                      class="agree-popup"
                      style="display: none">
                      <div class="agree-popup-header">
                        <h4>전자금융거래 이용약관</h4>
                      </div>
                      <div class="agree-popup-body">
                        <article>
                          <h1>전자금융거래 이용약관</h1>
                          <p>
                            와디즈(주)가 제공하는 전자금융거래서비스의 이용에
                            필요한 사항을 규정합니다.
                          </p>
                          <div class="update">
                            <h5>업데이트 노트</h5>
                            <ul>
                              <li>
                                본 이용약관은 2021년 1월 12일부터 시행됩니다.
                              </li>
                              <li>시행 2021. 7. 1</li>
                            </ul>
                          </div>
                          <ol class="table">
                            <li><a href="#제1장-총칙">제1장 총칙</a></li>
                            <li>
                              <a href="#제2장-전자지급결제대행-서비스"
                                >제2장 전자지급결제대행 서비스</a
                              >
                            </li>
                            <li>
                              <a href="#제3장-결제대금예치서비스"
                                >제3장 결제대금예치서비스</a
                              >
                            </li>
                            <li>
                              <a href="#제4장-선불전자지급수단의-발행-및-관리"
                                >제4장 선불전자지급수단의 발행 및 관리</a
                              >
                            </li>
                          </ol>
                          <hr />
                          <h2 id="제1장-총칙">제1장 총칙</h2>
                          <h3>제1조 (목적)</h3>
                          <p>
                            본 약관은 와디즈 주식회사(이하 "회사"라 합니다)가
                            제공하는 전자지급결제대행서비스, 결제대금예치서비스
                            및 선불전자지급수단의 발행 및 관리서비스(이하
                            "전자금융거래서비스"라 합니다)를 "회원"이 이용함에
                            있어, "회사"와 "회원" 간 권리, 의무 및 "회원"의
                            서비스 이용절차 등에 관한 사항을 규정하는 것을 그
                            목적으로 합니다.
                          </p>
                          <h3>제2조 (정의)</h3>
                          <ol>
                            <li>
                              본 약관에서 정한 용어의 정의는 아래와 같습니다.
                              <ol>
                                <li>
                                  "전자금융거래"라 함은 "회사"가 "전자적 장치"를
                                  통하여 전자금융업무를 제공하고, "회원"이
                                  "회사"의 종사자와 직접 대면하거나 의사소통을
                                  하지 아니하고 자동화된 방식으로 이를 이용하는
                                  거래를 말합니다.
                                </li>
                                <li>
                                  "전자지급거래"라 함은 자금을 주는 자가
                                  "회사"로 하여금 전자지급수단을 이용하여 자금을
                                  받는 자에게 자금을 이동하게 하는
                                  "전자금융거래"를 말합니다.
                                </li>
                                <li>
                                  "전자적 장치"라 함은 "전자금융거래"정보를
                                  전자적 방법으로 전송하거나 처리하는 데
                                  이용되는 장치로서 현금자동지급기,
                                  자동입출금기, 지급용단말기, 컴퓨터, 전화기 그
                                  밖에 전자적 방법으로 정보를 전송하거나
                                  처리하는 장치를 말합니다.
                                </li>
                                <li>
                                  "접근매체"라 함은 "전자금융거래"에 있어서
                                  "거래지시"를 하거나 이용자 및 거래내용의
                                  진실성과 정확성을 확보하기 위하여 사용되는
                                  수단 또는 정보로서 "전자금융거래서비스"를
                                  이용하기 위하여 "회사"에 등록된 아이디 및
                                  비밀번호, 기타 "회사"가 지정한 수단을
                                  말합니다.
                                </li>
                                <li>
                                  "아이디"란 "회원"의 식별과 서비스 이용을
                                  위하여 "회원"이 설정하고 "회사"가 승인한
                                  숫자와 문자의 조합을 말합니다.
                                </li>
                                <li>
                                  "비밀번호"라 함은 "회원"의 동일성 식별과
                                  "회원" 정보의 보호를 위하여 "회원"이 설정하고
                                  "회사"가 승인한 숫자와 문자의 조합을 말합니다.
                                </li>
                                <li>
                                  "회원"이라 함은 본 약관에 동의하고 본 약관에
                                  따라 "회사"가 제공하는 "전자금융거래서비스"를
                                  이용하는 자를 말합니다.
                                </li>
                                <li>
                                  "거래지시"라 함은 "회원"이 본 약관에 따라
                                  "회사"에게 "전자금융거래"의 처리를 지시하는
                                  것을 말합니다.
                                </li>
                                <li>
                                  "오류"라 함은 "회원"의 고의 또는 과실 없이
                                  "전자금융거래"가 본 약관 또는 "회원"의
                                  "거래지시"에 따라 이행되지 아니한 경우를
                                  말합니다.
                                </li>
                                <li>
                                  “사이트”라 함은 회사가 운영하는 와디즈
                                  사이트(www.wadiz.kr)를 의미합니다.
                                </li>
                              </ol>
                            </li>
                            <li>
                              본 조 및 본 약관의 다른 조항에서 정의한 것을
                              제외하고는 전자금융거래법 등 관련 법령에 정한 바에
                              따릅니다.
                            </li>
                          </ol>
                          <h3>제3조 (약관의 명시 및 변경)</h3>
                          <ol>
                            <li>
                              "회사"는 "회원"이 "전자금융거래"를 하기 전에 본
                              약관을 사이트에 게시하고 본 약관의 중요한 내용을
                              확인할 수 있도록 합니다.
                            </li>
                            <li>
                              "회사"는 "회원"의 요청이 있는 경우 전자문서의
                              전송(전자우편을 이용한 전송을 포함합니다)의 방식에
                              의하여 본 약관의 사본을 "회원"에게 교부합니다.
                            </li>
                            <li>
                              "회사"가 본 약관을 변경하는 때에는 그 시행일 1월
                              전에 변경되는 약관을 금융거래정보 입력화면 또는
                              회사가 운영하는 사이트에 게시함으로써 "회사"에게
                              공지합니다. 다만, 법령의 개정으로 인하여 긴급하게
                              약관을 변경한 때에는 변경된 약관을 서비스 이용
                              초기화면 등에 1개월 이상 게시하고 "회사"에게 사후
                              통지합니다.
                            </li>
                            <li>
                              이용자는 변경에 동의하지 아니한 경우 제3항의
                              고지나 통지를 받은 날로부터 30일 이내에 계약을
                              해지할 수 있으며, 계약해지의 의사표시를 하지
                              아니한 경우에는 변경에 동의한 것으로 봅니다.
                            </li>
                          </ol>
                          <h3>제4조 (거래내용의 확인)</h3>
                          <ol>
                            <li>
                              "회사"는 인터넷사이트 등에 조회 화면을 통하여
                              "회원"의 거래내용("회원"의 "오류정정 요구사실 및
                              처리결과에 관한 사항"을 포함합니다)을 확인할 수
                              있도록 합니다. 단, 전자적 장치의 운영 장애 또는 그
                              밖의 사유로 거래내용을 확인하게 할 수 없는 때에는
                              즉시 회사의 인터넷사이트에 그 사유를 알리고, 그
                              사유가 종료된 때부터 이용자가 거래내용을 확인할 수
                              있도록 합니다.
                            </li>
                            <li>
                              “회원”은 “회사”에게 거래내용에 관한 서면의 교부를
                              요청할 수 있습니다.
                            </li>
                            <li>
                              "회사"는 제2항에 따른 "회원"의 거래내용 서면교부
                              요청을 받은 경우 2주 이내에 전자문서의
                              전송(전자우편을 이용한 전송을 포함합니다),
                              모사전송, 우편 또는 직접 교부의 방법으로
                              거래내용에 관한 서면을 해당 이용자에게 교부합니다.
                              단, 회사가 전자적 장치의 운영장애, 그 밖의 이유로
                              거래내용에 관한 서면을 교부할 수 없는 때에는 즉시
                              "회원"에게 전자문서 전송(전자우편을 이용한 전송을
                              포함합니다)의 방법으로 그러한 사유를 알려야 하며,
                              전자적 장치의 운영장애 등의 사유로 거래내용을
                              제공할 수 없는 기간은 본항의 거래내용에 관한
                              서면의 교부기간에 산입하지 아니합니다.
                            </li>
                            <li>
                              제1항의 대상이 되는 거래내용 중 대상기간이 5년인
                              것은 다음 각호와 같습니다.
                              <ol>
                                <li>거래계좌의 명칭 또는 번호</li>
                                <li>전자금융거래의 종류 및 금액</li>
                                <li>전자금융거래상대방을 나타내는 정보</li>
                                <li>전자금융거래일시</li>
                                <li>
                                  "전자적 장치"의 종류 및 "전자적 장치"를 식별할
                                  수 있는 정보
                                </li>
                                <li>
                                  "회사"가 "전자금융거래"의 대가로 받은 수수료
                                </li>
                                <li>"회원"의 출금 동의에 관한 사항</li>
                                <li>
                                  해당 "전자금융거래"와 관련한 "전자적 장치"의
                                  접속기록
                                </li>
                                <li>
                                  "전자금융거래"의 신청 및 조건의 변경에 관한
                                  사항
                                </li>
                                <li>
                                  건당 거래금액이 1만원을 초과하는
                                  전자금융거래에 관한 기록
                                </li>
                              </ol>
                            </li>
                            <li>
                              제1항의 대상이 되는 거래내용 중 대상기간이 1년인
                              것은 다음 각호와 같습니다.
                              <ol>
                                <li>
                                  전자지급수단 이용과 관련된 거래승인에 관한
                                  기록
                                </li>
                                <li>
                                  "회원"의 오류정정 요구사실 및 처리결과에 관한
                                  사항
                                </li>
                                <li>기타 금융위원회가 고시로 정한 사항</li>
                                <li>
                                  건당 거래금액이 1만원 이하인 소액
                                  전자금융거래에 관한 기록
                                </li>
                              </ol>
                            </li>
                            <li>
                              “회원”이 제2항에서 정한 서면교부를 요청하고자 할
                              경우 다음의 주소 및 전화번호로 요청할 수 있습니다.
                              <ul>
                                <li>
                                  주소 : 경기도 성남시 분당구 판교로 242 A동 4층
                                </li>
                                <li>이메일주소 : info@wadiz.kr</li>
                                <li>전화번호 : 1661 - 9056</li>
                              </ul>
                            </li>
                          </ol>
                          <h3>제5조 ("거래지시"의 철회 등)</h3>
                          <p>
                            "회원"이 "회사"의 "전자금융거래서비스"를 이용하여
                            전자지급거래를 한 경우, "회원"은 지급의 효력이
                            발생하기 전까지 본 약관에서 정한 바에 따라 제4조
                            제5항에 기재된 연락처로 전자문서의 전송(전자우편을
                            이용한 전송을 포함합니다) 또는 사이트 내 철회에 의한
                            방법으로 "거래지시"를 철회할 수 있습니다. 단, 각
                            서비스 별 "거래지시" 철회의 효력 발생시기는 본 약관
                            제15조, 제20조 및 제25조에서 정한 바에 따릅니다.
                          </p>
                          <h3>제6조 ("오류"의 정정 등 )</h3>
                          <ol>
                            <li>
                              "회원"은 "전자금융거래서비스"를 이용함에 있어
                              "오류"가 있음을 안 때에는 "회사"에 대해 그 정정을
                              요구할 수 있으며, "회사"는 "회원"의 정정 신청이
                              있는 경우 이를 조사하여 "오류"가 있는 경우 정정
                              절차를 진행하고 정정요구를 받은 날로부터 2주
                              이내에 그 결과를 "회원"에게 알려 드립니다.
                            </li>
                            <li>
                              "회사"는 스스로 "전자금융거래"에 "오류"가 있음을
                              안 때에도 이를 즉시 조사하여 처리한 후 그 결과를
                              2주 이내에 문서, 전화 또는 전자우편으로 "회원"에게
                              알려 드립니다.
                            </li>
                          </ol>
                          <h3>제7조 ("전자금융거래" 기록의 생성 및 보존)</h3>
                          <ol>
                            <li>
                              "회사"는 "회원" 이용한 전자금융거래의 내용을 추적,
                              검색하거나 그 내용에 오류가 발생한 경우에 이를
                              확인하거나 정정할 수 있는 기록을 생성하여
                              보존합니다.
                            </li>
                            <li>
                              제1항의 규정에 따라 회사가 보존하여야 하는 기록의
                              종류 및 보존방법은 제4조 제3항 및 제4항에서 정한
                              바에 따릅니다.
                            </li>
                          </ol>
                          <h3>제8조 ("전자금융거래"정보의 제공금지)</h3>
                          <ol>
                            <li>
                              "회사"는 "전자금융거래서비스"를 제공함에 있어서
                              취득한 "회원"의 인적 사항, "회원"의 계좌,
                              "접근매체" 및 "전자금융거래"의 내용과 실적에 관한
                              정보 또는 자료를 법령에 의하거나 "회원"의 동의를
                              얻지 아니하고 제3자에게 제공, 누설하거나 업무 상
                              목적 외에 사용하지 아니합니다.
                            </li>
                            <li>
                              "회사"는 "회원"이 안전하게 "전자금융거래서비스"를
                              이용할 수 있도록 "회원"의 개인정보보호를 위하여
                              개인정보취급방침을 운용합니다. "회사"의
                              개인정보취급방침은 "회사"가 운영하는 사이트에서
                              확인할 수 있습니다.
                            </li>
                          </ol>
                          <h3>제9조 ("회사"의 책임)</h3>
                          <ol>
                            <li>
                              "회사"는 "접근매체"의 위조나 변조로 발생한
                              사고(단, "회사"가 "접근매체"의 발급 주체이거나
                              사용, 관리 주체인 경우), 계약체결 또는
                              "거래지시"의 전자적 전송이나 처리과정에서 발생한
                              사고로 인하여 "회원"에게 손해가 발생한 경우에는 그
                              손해를 배상할 책임을 부담합니다.
                            </li>
                            <li>
                              "회사"는 제1항에도 불구하고 다음 각호의 경우에는
                              그 책임의 전부 또는 일부를 "회원"이 부담하게 할 수
                              있습니다.
                              <ol>
                                <li>
                                  "회원"이 "접근매체"를 제3자에게 대여하거나 그
                                  사용을 위임한 경우 또는 양도나 담보의 목적으로
                                  제공한 경우
                                </li>
                                <li>
                                  제3자가 권한 없이 "회원"의 "접근매체"를
                                  이용하여 "전자금융거래"를 할 수 있음을
                                  알았거나 쉽게 알 수 있었음에도 불구하고
                                  "접근매체"를 누설하거나 노출 또는 방치한 경우
                                </li>
                                <li>
                                  법인("중소기업기본법" 제2조 제2항에 의한
                                  소기업을 제외합니다)인 "회원"에게 손해가
                                  발생한 경우로서 "회사"가 사고를 방지하기
                                  위하여 보안절차를 수립하고 이를 철저히
                                  준수하는 등 합리적으로 요구되는 충분한
                                  주의의무를 다한 경우
                                </li>
                              </ol>
                            </li>
                            <li>
                              "회사"는 전자금융거래를 위한 전자적 장치 또는
                              '정보통신망 이용촉진 및 정보보호 등에 관한 법률'
                              제 2조 제 1항 제 1호에 따른 정보통신망에 침입하여
                              거짓이나 그 밖의 부정한 방법으로 획득한 접근매체의
                              이용으로 발생한 사고로 인하여 이용자에게 그 손해가
                              발생한 경우에는 그 손해를 배상할 책임이 있습니다.
                            </li>
                            <li>
                              "회사"는 컴퓨터 등 정보통신설비의 보수점검, 교체의
                              사유가 발생하여 전자금융서비스의 제공을 일시적으로
                              중단할 경우에는 "회사"의 사이트를 통하여
                              이용자에게 중단 일정 및 중단 사유를 사전에
                              공지합니다.
                            </li>
                          </ol>
                          <h3>제10조 (분쟁처리 및 분쟁조정)</h3>
                          <ol>
                            <li>
                              "회원"은 "회사"의 사이트 하단에 게시된 분쟁처리
                              담당자에 대하여 "전자금융거래"와 관련한 의견 및
                              불만의 제기, 손해배상의 청구 등의 분쟁처리를
                              요구할 수 있습니다.
                            </li>
                            <li>
                              "회원"이 "회사"에 대하여 분쟁처리를 신청한
                              경우에는 "회사"는 15일 이내에 이에 대한 조사 또는
                              처리 결과를 "회원"에게 안내 합니다.
                            </li>
                            <li>
                              "회원"은 "회사"의 분쟁처리결과에 대하여 이의가
                              있을 경우 "금융위원회의 설치 등에 관한 법률"
                              제51조의 규정에 따른 금융감독원의
                              금융분쟁조정위원회나 "소비자기본법" 제60조 제1항의
                              규정에 따른 한국소비자원의 소비자분쟁조정위원회에
                              "회사"의 "전자금융거래서비스"의 이용과 관련한
                              분쟁조정을 신청할 수 있습니다.
                            </li>
                          </ol>
                          <h3>제11조 ("회사"의 안정성 확보 의무)</h3>
                          <p>
                            "회사"는 전자금융거래가 안전하게 처리될 수 있도록
                            선량한 관리자로서의 주의를 다하며, "전자금융거래"의
                            안정성과 신뢰성을 확보할 수 있도록 "전자금융거래"의
                            종류 별로 전자적 전송이나 처리를 위한 인력, 시설,
                            "전자적 장치" 등의 정보기술부문 및 전자금융업무에
                            관하여 금융위원회가 정하는 기준을 준수합니다.
                          </p>
                          <h3>제12조 (약관 외 준칙)</h3>
                          <p>
                            "회사"와 "회원" 사이에 개별적으로 합의한 사항이 이
                            약관에 정한 사항과 다를 때에는 그 합의사항을 이
                            약관에 우선하여 적용합니다. 본 약관에서 정하지
                            아니한 사항(용어의 정의 포함)에 대하여는
                            전자금융거래법, 여신전문금융업법 등 소비자보호에
                            관한 법령 및 개별 약관에서 정한 바에 따릅니다.
                          </p>
                          <h3>제13조 (관할)</h3>
                          <p>
                            "회사"와 "회원" 간에 발생한 분쟁에 관한 관할은
                            민사소송법에서 정한 바에 따릅니다.
                          </p>

                          <h2 id="제2장-전자지급결제대행-서비스">
                            제2장 전자지급결제대행 서비스
                          </h2>
                          <h3>제14조 (정의)</h3>
                          <p>본 장에서 정하는 용어의 정의는 아래와 같습니다.</p>
                          <ol>
                            <li>
                              "전자지급결제대행 서비스"라 함은 전자적 방법으로
                              재화 또는 용역(이하 이 약관에서 "재화 등"이라고
                              합니다)의 구매에 있어서 지급결제 정보를 송신하거나
                              수신하는 것 또는 그 대가의 정산을 대행하거나
                              매개하는 서비스를 말합니다.
                            </li>
                            <li>
                              "회원"이라 함은 본 약관에 동의하고 "회사"가
                              제공하는 "전자지급결제대행 서비스"를 이용하는 자를
                              말합니다.
                            </li>
                          </ol>
                          <h3>제15조 ("거래지시"의 철회)</h3>
                          <ol>
                            <li>
                              "회원"이 "전자지급결제대행서비스"를 이용한 경우,
                              이용자는 "거래지시"된 금액의 정보에 대하여
                              수취인의 계좌가 개설되어 있는 금융기관 또는
                              "회사"의 계좌의 원장에의 입금기록 또는 "전자적
                              장치"에의 입력이 끝나기 전까지 "거래지시"를 철회할
                              수 있습니다.
                            </li>
                            <li>
                              "회사"는 "회원"의 "거래지시"의 철회에 따라
                              지급거래가 이루어지지 않은 경우 수령한 자금을
                              "회원"에게 반환하여야 합니다.
                            </li>
                          </ol>
                          <h3>제16조 ("한도" 등)</h3>
                          <p>
                            "회사"의 정책 및 결제업체(이동통신사, 카드사 등)의
                            기준에 따라 "회원"의 결제수단 별 월 누적 결제액 및
                            결제한도가 제한될 수 있습니다.
                          </p>
                          <h3>제17조 ("접근매체"의 관리)</h3>
                          <ol>
                            <li>
                              "회사"는 "전자지급결제대행 서비스" 제공 시
                              "접근매체"를 선정하여 "회원"의 신원, 권한 및
                              "거래지시"의 내용 등을 확인합니다.
                            </li>
                            <li>
                              "회원"은 "접근매체"를 사용함에 있어서 다른 법률에
                              특별한 규정이 없는 한 다음 각 호의 행위를 하여서는
                              아니 됩니다.
                              <ol>
                                <li>"접근매체"를 양도하거나 양수하는 행위</li>
                                <li>
                                  "접근매체"를 대여하거나 사용을 위임하는 행위
                                </li>
                                <li>
                                  "접근매체"를 질권 기타 담보 목적으로 하는 행위
                                </li>
                                <li>1호부터 3호까지의 행위를 알선하는 행위</li>
                              </ol>
                            </li>
                            <li>
                              "회원"은 자신의 "접근매체"를 제3자에게 누설 또는
                              노출하거나 방치하여서는 안되며, "접근매체"의
                              도용이나 위조 또는 변조를 방지하기 위하여 충분한
                              주의를 기울여야 합니다.
                            </li>
                            <li>
                              "회사"는 "회원"으로부터 "접근매체"의 분실이나 도난
                              등의 통지를 받은 때에는 그 때부터 제3자가 그
                              "접근매체"를 사용함으로 인하여 "회원"에게 발생한
                              손해를 배상할 책임이 있습니다.
                            </li>
                          </ol>

                          <h2 id="제3장-결제대금예치서비스">
                            제3장 결제대금예치서비스
                          </h2>
                          <h3>제18조 (정의)</h3>
                          <p>
                            본 장에서 사용하는 용어의 정의는 다음과 같습니다.
                          </p>
                          <ol>
                            <li>
                              "결제대금예치서비스"라 함은 회사의 사이트에서
                              연결되는 와디즈 스토어 페이지에서 이루어지는
                              선불식 통신판매에 있어서, "회사"가 "소비자"가
                              지급하는 결제 대금을 예치하고 배송이 완료되는 등
                              구매가 확정된 후 "재화 등"의 대금을 "판매자"에게
                              지급하는 서비스를 말합니다.
                            </li>
                            <li>
                              "선불식 통신판매"라 함은 "소비자"가 "재화 등"을
                              공급받기 전에 미리 대금의 전부 또는 일부를
                              지급하는 방식의 통신판매를 말합니다.
                            </li>
                            <li>
                              "판매자"라 함은 본 약관에 동의하고 "회사"가
                              운영하는 서비스에 입점하여 통신판매를 하는 자를
                              말합니다.
                            </li>
                            <li>
                              "소비자"라 함은 본 약관에 동의하고 "회사"의
                              서비스에 입점한 "판매자"로부터 "재화 등"을
                              구매하는 자로서 전자상거래 등에 서의 소비자보호에
                              관한 법률 제2조 제5호의 요건에 해당하는 자를
                              말합니다.
                            </li>
                            <li>
                              "이용자"라 함은 본 조 제3호 및 제4호의 "판매자"와
                              "소비자"를 말합니다.
                            </li>
                          </ol>
                          <h3>제19조 (예치된 결제대금의 지급방법)</h3>
                          <ol>
                            <li>
                              "소비자"(그 "소비자"의 동의를 얻은 경우에는 "재화
                              등"을 공급받을 자를 포함한다. 이하 제2항 및
                              제3항에서 같습니다)는 "재화 등"을 공급받은 사실을
                              "재화 등"을 공급받은 날부터 3영업일 이내에
                              "회사"에 통보하여야 합니다.
                            </li>
                            <li>
                              "회사"는 "소비자"로부터 "재화 등"을 공급받은
                              사실을 통보 받을 경우 "회사"가 정한 기일 내에
                              판매자에게 결제대금을 지급합니다.
                            </li>
                            <li>
                              "회사"는 "소비자"가 "재화 등"을 공급받은 날부터
                              3영업일이 지나도록 정당한 사유의 제시 없이 그
                              공급받은 사실을 "회사"에 통보하지 아니하는 경우에
                              "소비자"의 동의 없이 "판매자"에게 결제대금을
                              지급할 수 있습니다.
                            </li>
                            <li>
                              "회사"가 "판매자"에게 결제대금을 지급하기 전에
                              "소비자"가 그 결제대금을 환급 받을 정당한 사유가
                              발생한 경우에는 그 결제대금을 "소비자"에게
                              환급합니다.
                            </li>
                          </ol>
                          <h3>제20조 (거래지시의 철회)</h3>
                          <ol>
                            <li>
                              "이용자"가 "결제대금예치서비스"를 이용한 경우,
                              "이용자"는 거래 지시된 금액의 정보가 수취인이
                              지정한 전자적 장치에 도달한 때까지 거래지시를
                              철회할 수 있습니다.
                            </li>
                            <li>
                              "회사"는 "소비자"로부터 "재화 등"을 공급받은
                              사실을 통보 받을 경우 "회사"가 정한 기일 내에
                              판매자에게 결제대금을 지급합니다.
                            </li>
                            <li>
                              "회사"는 "이용자"의 거래지시의 철회에 따라
                              지급거래가 이루어지지 않은 경우 수령한 자금을
                              "이용자"에게 반환하여야 합니다.
                            </li>
                          </ol>
                          <h3>제21조 (준용규정)</h3>
                          <p>제17조는 본 장에 준용합니다.</p>

                          <h2 id="제4장-선불전자지급수단의-발행-및-관리">
                            제4장 선불전자지급수단의 발행 및 관리
                          </h2>
                          <h3>제22조 (정의)</h3>
                          <ol>
                            <li>
                              본 장에서 사용하는 용어의 정의는 다음과 같습니다.
                              <ol>
                                <li>
                                  "선불전자지급수단"이라 함은 포인트, 쿠폰 등
                                  "회사"가 미리 "회원"에게 회원가입약관을 통해
                                  고지한 전자금융거래법 상 선불전자지급수단을
                                  말합니다.
                                </li>
                                <li>
                                  "회원"이라 함은 본 약관에 동의하고 메이커,
                                  판매자로부터 "재화 등"을 펀딩 또는 구매하고
                                  선불전자지급수단을 결제수단으로 하여 그 대가를
                                  지급하는 자를 말합니다.
                                </li>
                              </ol>
                            </li>
                            <li>
                              본 장에서 정하지 않은 용어는 회원가입약관에서 정한
                              바에 따릅니다.
                            </li>
                          </ol>
                          <h3>제23조 ("접근매체"의 관리)</h3>
                          <p>제17조는 본 장에 준용합니다.</p>
                          <h3>제24조 ("거래지시"의 철회)</h3>
                          <p>
                            "회원"이 "선불전자지급수단"을 이용하여 자금을
                            지급하는 경우, "회원"은 거래 지시된 금액의 정보가
                            수취인이 지정한 "전자적 장치"에 도달하기 전까지
                            "거래지시"를 철회할 수 있습니다.
                          </p>
                          <h3>제25조 (소멸시효)</h3>
                          <p>
                            "선불전자지급수단" 중 포인트의 소멸시효는
                            적립일로부터 5년이며, 쿠폰의 소멸시효는 개별
                            안내되는 기간에 따릅니다. "회원"은 "회사"가 정한
                            소멸시효 내에서만 "선불전자지급수단"을 사용할 수
                            있습니다.
                          </p>
                          <h3>제26조 (기타)</h3>
                          <p>
                            "회사"는 선불전자지급수단의 보증보험 상품에
                            가입하였습니다.
                          </p>
                        </article>
                      </div>
                      <div class="agree-popup-footer">
                        <button
                          type="button"
                          class="wz button less primary"
                          onclick="closeAgreePopup('electronicFinancialTransaction');">
                          확인
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--<div class="btn-wrap">
              <button type="button" id="btn-submit" class="wz primary button">
                결제 예약하기
              </button>
            </div>-->
            <script>
              // 클라이언트 키 설정
              const clientKey = 'test_ck_GKNbdOvk5rkA775xZjE3n07xlzmj'
              // TossPayments 객체 생성
              const tossPayments = TossPayments(clientKey)
            </script>
            <div class="btn-wrap">
              <button type ="button" onClick="paymentToss();" class="wz primary button">
                결제하기
              </button>
            </div>
            <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
            <script>
              const paymentToss = () => {
                // UUIDd 생성 API 호출
                $.ajax({
                  url: "/web/util/uuid",
                  async: true,
                  success: ( result ) => {
                    console.log(result);
                    let products = result['products'];
                    let members = result['members'];
                    console.log(products);
                    let amount = products[0]['fpprice'];
                    let orderName = products[0]['fptitle'];
                    if(products.length > 1){
                      orderName += "외 "+ (products.length-1)+"건";
                    }
                    let customerName = members[0]['mname'];

                    // Tosspayments API 호출
                    tossPayments.requestPayment('가상계좌', { // 결제 수단 파라미터
                      // 결제 정보 파라미터
                      amount: amount, //가격
                      orderId: result.uuid, //uuid인데 ajax 불러 오는것도 orderName넣으려고 만듬(js에서 만드는거 보다는 백에서 만드는게 편함)
                      orderName: orderName, //상품명
                      customerName: customerName, // user 이름
                      successUrl: 'http://localhost:80/sample/testSuccess', //성공 url 성공 url에서는 승인 api 한번 호출하고 마이페이지로 넘어가도록 해야함
                      failUrl: 'http://localhost:80/fail',
                      validHours: 24,
                      cashReceipt: {
                        type: '소득공제',
                      },
                    })
                  }
                });
              }
            </script>
            <!-- 간편결제 예약 앱 -->
            <div id="reward-reservation-app" data-reservation-info="null"></div>
          </div>
        </div>
      </div>

      <div id="daumAddressLypop" class="lypop-fixed" style="display: none">
        <div class="daum-address-wrap">
          <div id="daumAddressCon"></div>
          <div class="btn-wrap">
            <button
              type="button"
              onclick="closeLyPop('daumAddress')"
              class="btn-pd-brown">
              닫기
            </button>
          </div>
        </div>
      </div>

      <div id="footer">
        <div th:replace="/fragment/footer__15kue.html :: footer"></div>
      </div>

      <script>
        window.dispatchEvent(
          new CustomEvent('WadizFooterLoaded', {
            detail: {
              element: document.getElementById('footer'),
            },
          })
        );
      </script>
    </div>
    <div id="wadiz-app-banner"></div>

    <script src="https://nsp.pay.naver.com/sdk/js/naverpay.min.js"></script>
    <script type="text/javascript">
      var supporterCert = false; /*서포터인증여부*/
      var usablePoint = 0;
      var newTotalPrice = $('#totalPrice').val();
      var validMobileNumberYn = '';
      var limitPoint = $('#limitPoint').val();
      var fundingPrice = '42000';

      // 쿠폰 관련 변수
      var $couponField = $('#coupon-field');
      var $couponPrice = $('#couponPrice');
      var $couponDiscountAmount = $('#inputCouponDiscountAmount');
      var $couponSelect = $('#couponSelect');
      var $pointInput = $('#pointInput');
      var $ckptAll = $('#ckptAll');
      var couponDiscountPrice = '';
      var couponDiscountType = '';
      var paymentModel = {
        fundingPrice: parseInt(fundingPrice),
        totalPrice: parseInt($('#totalPrice').val()), // 펀딩금액 + 추가후원금 + 배송비
        pointPrice: 0, // 적용된 포인트 할인 금액
        couponPrice: 0, // 적용된 쿠폰 할인 금액
        newTotalPrice: 0, // 실제 카드 결제 금액
        limitPointPrice: 0, // 가용포인트 제한
        isAllPointUse: false,
        state: 'INIT',
        // INIT
        // POINT_ALL_USE
        // POINT_NOT_ALL_USE
        // COUPON_CHANGED
        // POINT_CHANGED
      };

      if (validMobileNumberYn == 'Y') {
        supporterCert = true;
      }
      alertify.set({
        labels: {
          ok: '확인',
          cancel: '취소',
        },
      });

      $(document).ready(function () {
        var campaignId = $('#campaignId').val();
        var $purchaseForm = $('#purchaseForm');
        var $wpurchaseDeliveryWrap = $(
          '.wpurchase-delivery-wrap',
          $purchaseForm
        );
        var $paymentInfoContainer = $('.payment-info-container', $purchaseForm);
        var $paymentSystemNotice = $('#payment-system-notice', $purchaseForm);

        numOnly();
        /*배송지 관련 Motion*/
        $('input[name=delivery]').change(function () {
          if ($('#rddvNew').is(':checked')) {
            $('.show-list').css('display', 'block');
            $('.delivery-list').hide();
            $('.deliver-new').addClass('active');
          } else {
            $('.show-list').hide();
            $('.delivery-list').show();
            $('.deliver-new').removeClass('active');
          }
        });
        $('.show-list').click(function () {
          $('.delivery-list').toggle();
        });

        function resetCouponSelector() {
          paymentModel.couponPrice = 0;
          $('#couponSelect').val('').trigger('change');
        }

        // 포인트 / 쿠폰 화면 반영
        function renderSumInfo() {
          var $pointInput = $('#pointInput');
          var $pricePoint = $('#pointPrice');
          var $priceCoupon = $('#couponPrice');
          var $totalPrice = $('#totalPriceView');
          var $applyPoint = $('#applyPoint');
          var $inputCouponDiscountAmount = $('#inputCouponDiscountAmount');

          var point = paymentModel.pointPrice.format();
          var coupon = paymentModel.couponPrice.format();
          var total = paymentModel.newTotalPrice.format();

          if (paymentModel.newTotalPrice === 0) {
            $paymentInfoContainer.hide();
          } else {
            $paymentInfoContainer.show();
          }

          $inputCouponDiscountAmount.val(paymentModel.couponPrice || 0);
          $ckptAll.prop('checked', paymentModel.isAllPointUse);
          $applyPoint.val(paymentModel.pointPrice);
          $pointInput.val(paymentModel.pointPrice);
          $pricePoint.text(point === 0 ? '-' : '-' + point + '원');
          $priceCoupon.text(coupon === 0 ? '-' : '-' + coupon + '원');
          $totalPrice.text(total);
          newTotalPrice = paymentModel.newTotalPrice;

          // 금액 변경 시 결제 정보 영역 업데이트 하기위해 이벤트 발생
          var rewardSimplePayApp = document.getElementById(
            'reward-simplepay-app'
          );
          rewardSimplePayApp.dataset.isAvailableInstallment =
            paymentModel.newTotalPrice >= 50000;
          rewardSimplePayApp.dispatchEvent(new CustomEvent('datachange'));

          var rewardFundingPriceApp = document.getElementById(
            'reward-funding-price-app'
          );
          rewardFundingPriceApp.dataset.couponPrice = paymentModel.couponPrice;
          if (
            $couponSelect[0].selectedOptions[0] &&
            $couponSelect[0].selectedOptions[0].dataset.issueTarget
          ) {
            rewardFundingPriceApp.dataset.couponTarget =
              $couponSelect[0].selectedOptions[0].dataset.issueTarget;
          }
          rewardFundingPriceApp.dataset.pointPrice = paymentModel.pointPrice;
          rewardFundingPriceApp.dispatchEvent(new CustomEvent('datachange'));
        }

        // Model 업데이트
        function calcModel(event) {
          var vm = paymentModel;
          vm.totalPrice = $('#totalPrice').val();

          if (vm.totalPrice < vm.couponPrice && !vm.isAllPointUse) {
            wadiz.alert('쿠폰 할인 금액이 결제 금액을 초과할 수 없습니다.');
            resetCouponSelector();
          }

          if (vm.state === 'POINT_NOT_ALL_USE') {
            vm.pointPrice = 0;
            vm.state = 'INIT';
          }

          if (vm.state === 'POINT_ALL_USE') {
            if (vm.limitPointPrice > vm.totalPrice - vm.couponPrice) {
              // 가용포인트 > (전체 - 쿠폰)
              // => 적용 포인트  = (전체 - 쿠폰);
              vm.pointPrice = vm.totalPrice - vm.couponPrice;
            } else {
              if (vm.totalPrice - vm.limitPointPrice > 1000) {
                vm.pointPrice = vm.limitPointPrice;
              } else {
                vm.pointPrice = vm.limitPointPrice;
              }
            }
            vm.state = 'INIT';
          }

          if (vm.state === 'COUPON_CHANGED' || vm.state === 'POINT_CHANGED') {
            var pointPrice = parseInt(vm.pointPrice);
            var totalWithoutCoupon = vm.totalPrice - vm.couponPrice;
            if (vm.pointPrice) {
              if (vm.couponPrice) {
                if (pointPrice > totalWithoutCoupon) {
                  // 포인트 > (전체 - 쿠폰)
                  // => 적용 포인트 = (전체 - 쿠폰);
                  vm.pointPrice = totalWithoutCoupon;
                }
              } else {
                if (pointPrice > vm.totalPrice) {
                  vm.pointPrice = vm.totalPrice;
                }
              }
            }
            vm.state = 'INIT';
          }

          // 최종 결제금액
          vm.newTotalPrice = vm.totalPrice - vm.pointPrice - vm.couponPrice;

          if (vm.newTotalPrice === vm.pointPrice + vm.couponPrice) {
            renderSumInfo();
            return;
          }

          // 총 결제금액이 1000원 미만인 경우
          // 가용포인트 >= 총 결제금액 + 적용된 포인트 => 적용포인트 = 총 결제금액 + 적용된 포인트
          var isBetweenThousand =
            0 < vm.newTotalPrice && vm.newTotalPrice < 1000;
          var isMinusPrice = vm.newTotalPrice < 0;

          if ((isBetweenThousand || isMinusPrice) && event) {
            if (event.type === 'blur' || event.type === 'change') {
              if (!!parseInt(vm.pointPrice)) {
                var lackOfTotalPrice = 1000 - parseInt(vm.newTotalPrice);

                if (
                  vm.limitPointPrice >=
                  parseInt(vm.pointPrice) - lackOfTotalPrice
                ) {
                  vm.pointPrice = parseInt(vm.pointPrice) - lackOfTotalPrice;
                } else {
                  vm.pointPrice = 0;
                }
                vm.newTotalPrice =
                  vm.totalPrice - vm.pointPrice - vm.couponPrice;
              }
              wadiz.alert('최종 결제금액이 1,000원 미만으로 결제할 수 없어요.');
            }
          }
          vm.state = 'INIT';
          renderSumInfo();
        }

        // 포인트
        function getPointPrcie() {
          var limitPoint = parseInt($('#limitPoint').val());
          var pointValue =
            parseInt($pointInput.val().replace(/[^0-9]/g, '')) || 0;
          if (limitPoint < pointValue) {
            pointValue = limitPoint;
          }

          return pointValue;
        }

        // 쿠폰 초기화
        function initCouponList(campaignId) {
          $.ajax({
            type: 'get',
            url: '/web/reward/api/coupons/owners/my',
            data: {
              fundingAmount: paymentModel.fundingPrice,
              campaignId: campaignId,
              checkDeviceCondition: true,
            },
          })
            .then(function (response) {
              if (!response.length) {
                $couponField.addClass('disabled');
                $couponField.find('.text').text('사용가능한 쿠폰이 없습니다.');
                return;
              }
              window.couponsData = {};
              var options = $.map(response, function (coupon) {
                var couponTemp = coupon.template;
                if (!couponTemp.isUsed) {
                  couponsData[coupon.couponKey] = couponTemp.templateNo;
                  var discount =
                    couponTemp.discountType === 'FIXED_AMOUNT'
                      ? couponTemp.discountAmount.format() + '원'
                      : couponTemp.discountRate + '%';
                  var option =
                    '<option value="' +
                    coupon.couponKey +
                    '" data-type="' +
                    couponTemp.discountType +
                    '" data-issue-target="' +
                    couponTemp.issueTargetType +
                    '">' +
                    discount +
                    ' | ' +
                    couponTemp.couponName +
                    '</option>';

                  return option;
                }
              });
              options.unshift('<option value="">쿠폰을 선택하세요</option>');
              options.join('');

              $couponSelect.html(options).trigger('change');
            })
            .fail(function (error) {
              $couponField.addClass('disabled');
              $couponField
                .find('.text')
                .text('일시적으로 쿠폰을 사용하실 수 없습니다.');
            });
        }

        // 쿠폰 할인금액 조회
        function getCouponDiscountAmount(param) {
          var couponKey = param.couponKey;
          $('#inputCouponKey').val(couponKey || '');

          if (!couponKey) {
            paymentModel.couponPrice = 0;
            paymentModel.isAllPointUse = false;
            paymentModel.state = 'COUPON_CHANGED';
            calcModel(param.event);
            return;
          }

          $.ajax({
            type: 'get',
            url:
              '/web/reward/api/coupons/' + param.couponKey + '/discount-amount',
            data: {
              fundingAmount: param.fundingAmount || 0,
            },
          })
            .then(function (response) {
              var discountValue = response;
              paymentModel.couponPrice = response;
              calcModel(param.event);
              StorageInBrazeDataController.add('fundingDetail', {
                couponTemplateNo: couponsData[param.couponKey],
              });
            })
            .fail(function (error) {
              $couponField.addClass('disabled');
              $couponField
                .find('.text')
                .text('일시적으로 쿠폰을 사용하실 수 없습니다.');
            });
        }

        // 포인트 필드 처리
        $ckptAll.on({
          change: function (event) {
            var target = event.target;
            paymentModel.isAllPointUse = target.checked;

            if (!paymentModel.isAllPointUse) {
              paymentModel.state = 'POINT_NOT_ALL_USE';
              paymentModel.pointPrice = 0;
            } else {
              paymentModel.state = 'POINT_ALL_USE';
            }

            calcModel(event);
          },
        });

        $pointInput.on({
          keyup: function (event) {
            var target = event.target;
            var value =
              target.value === '' || isNaN(target.value)
                ? 0
                : parseInt(target.value);

            if (value > paymentModel.limitPointPrice) {
              wadiz.alert('보유 포인트를 초과하여 사용하실 수 없습니다.');
              paymentModel.pointPrice = 0;
              target.value = 0;
            } else if (!paymentModel.limitPointPrice) {
              wadiz.alert('사용가능한 포인트가 없습니다.');
            } else if (paymentModel.pointPrice !== value) {
              paymentModel.pointPrice = value;
              paymentModel.state = 'POINT_CHANGED';
              paymentModel.isAllPointUse = false;
            }
            calcModel();
          },
          blur: function (event) {
            var value = event.target.value || 0;

            paymentModel.pointPrice = value;
            paymentModel.state = 'POINT_CHANGED';
            calcModel(event);
          },
        });

        $couponSelect.on('change', function (event) {
          var target = event.target;
          var param = {
            event: event,
            couponKey: target.value,
            fundingAmount: paymentModel.fundingPrice,
            pointAmount: getPointPrcie(),
          };
          paymentModel.state = 'COUPON_CHANGED';
          getCouponDiscountAmount(param);
        });

        //펀딩 결제 예약
        var reservationButton = document.getElementById('btn-submit');
        reservationButton.addEventListener('click', function () {
          calcModel(); // 서포터 클럽 배송비 계산 시점 차이 때문에 예약 요청 전 금액 재 계산
          purchaseReservation();
        });

        setUsablePointInfo();
        autoFocusPaymentInputs();
        initCouponList(campaignId); // 쿠폰 초기화

        // 유저 전자금융거래 이용 동의 조회
        // $.ajax({
        //   url: "/web/v2/terms/accepter",
        //   success: function(response) {
        //     if (response.code === "SUSS000") {
        //       var agreedFundingTermsList = response.data.funding;
        //
        //       if (agreedFundingTermsList && agreedFundingTermsList.length > 0) {
        //         var isAgreedElectronicFinancialTransaction = agreedFundingTermsList.filter(function (termsItem) {
        //           return termsItem.termsType === "electronic_financial_transaction";
        //         }).length > 0;
        //
        //         if (!isAgreedElectronicFinancialTransaction) {
        //           $(".electronicFinancialTransactionWrap > label").append(
        //             "<input id=\"electronicFinancialTransactionCheckBox\" class=\"notice-confirm-checkbox\" type=\"checkbox\" name=\"check1\" value=\"Y\" autocomplete=\"off\" onchange=\"eachTermsChanged()\">" +
        //             "<span>전자금융거래 이용약관</span>"
        //           );
        //           $(".electronicFinancialTransactionWrap").css("display", "block");
        //         }
        //       }
        //     }
        //   }
        // });

        // 네이버페이 결제 결과 알림창
        var naverPayResult = '';
        if (naverPayResult === 'false') {
          var naverPayResultMessage = ''.replace(/<br\s*\/?>/gi, '\n');
          if (naverPayResultMessage === 'userCancel') {
            wadiz.alert(
              '결제 정보 등록을 취소하셨습니다. 결제 정보를 다시 등록해 주세요.'
            );
          } else {
            wadiz.alert(naverPayResultMessage);
          }
        }

        function responseUpdateUI() {
          var isMobileSize = window.innerWidth < 960;
          var rewardSimplePayApp = document.getElementById(
            'reward-simplepay-app'
          );

          if (rewardSimplePayApp) {
            if (isMobileSize) {
              // mobile
              rewardSimplePayApp.style.marginBottom = '32px';
            } else {
              rewardSimplePayApp.style.marginBottom = '0';
            }
          }
        }

        responseUpdateUI();
        window.addEventListener('resize', responseUpdateUI);
      });
      window.onpageshow = function (event) {
        // Safari, Firefox 뒤로가기 시 새로고침
        if (event.persisted) {
          document.location.reload();
        }
      };

      /* 결제 정보 자동포커스 */
      function autoFocusPaymentInputs() {
        var $paymentInputs = $('#wpurchasePaymentInfo input');
        $paymentInputs.map(function (idx, input) {
          $(input).attr('data-idx', idx);
        });

        $paymentInputs.on('keyup', function () {
          var $thisInput = $(this);
          var nextInputIndex = parseInt($thisInput.attr('data-idx')) + 1;
          var maxlength = $thisInput.attr('maxlength');

          if ($thisInput.val().length >= maxlength) {
            $paymentInputs.eq(nextInputIndex).focus();
          }
        });
      }

      /*휴대전화인증하기*/
      function sendSms() {
        if ($('#supporterMobileNumber').val() !== '') {
          $('#phoneNumError').hide();
          var supporterMobileNumber = $('#supporterMobileNumber').val();
          var param = {
            mobileNumber: supporterMobileNumber,
          };
          $.ajax({
            url: '/web/waccount/ajaxRequestSendUserAuthSmsCorpManager',
            data: param,
            type: 'POST',
            success: function (result) {
              if ('SUSS000' == result.code) {
                $('#confirmId').val(result.confirmId);
                $('#sendSmsBtn').hide();
                $('#resendSmsBtn').css('display', 'inline-block');
                $('#supporterCertArea').show();
                $('#supporterCertBtn').show();
                $('#authCode').focus();
                setTimer();
              }
            },
          });
        } else {
          $('#phoneNumError').show();
        }
      }

      /*3분 타이머 시작*/
      function setTimer() {
        $('#ms_timer').countdown({
          date: new Date().getTime() + 180 * 1000,
          end: function () {
            $('#timeError').show();
            $('#supporterCertArea').hide();
            $('#supporterCertBtn').hide();
            $('#authCode').val('');
          },
        });
      }

      /*인증번호 인증*/
      function confirmSmsCode() {
        $('#ms_timer').countdown('destroy');
        var supporterMobileNumber = $('#supporterMobileNumber').val();
        var param = {
          confirmId: $('#confirmId').val(),
          authCode: $('#authCode').val(),
          mobileNumber: supporterMobileNumber,
        };

        $.ajax({
          url: '/web/waccount/ajaxRequestUserSmsCorpManagerConfirm',
          data: param,
          type: 'POST',
          async: false,
          success: function (result) {
            if ('SUSS000' == result.code) {
              $('#timeError').hide();
              $('#confirmError').hide();
              $('#phoneNumError').hide();
              $('#supporterCertBtn').hide();
              $('#certPhone').html(supporterMobileNumber);
              supporterCert = true;

              setTimer();
              //updateUserMobileNumber();
            } else {
              $('#confirmError').show();
            }
          },
        });
      }

      /*재전송클릭시 기존타이머죽임*/
      function resendSms() {
        $('#timeError').hide();
        $('#confirmError').hide();
        $('#phoneNumError').hide();
        $('#ms_timer').countdown('destroy');

        sendSms();
      }

      /*DAUM 우편번호검색*/
      function findPostCode() {
        var element = document.getElementById('daumAddressCon');
        new daum.Postcode({
          oncomplete: function (data) {
            // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

            // 각 주소의 노출 규칙에 따라 주소를 조합한다.
            // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
            var fullAddr = ''; // 최종 주소 변수
            var extraAddr = ''; // 조합형 주소 변수

            // 사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
            if (data.userSelectedType === 'R') {
              // 사용자가 도로명 주소를 선택했을 경우
              fullAddr = data.roadAddress;
            } else {
              // 사용자가 지번 주소를 선택했을 경우(J)
              fullAddr = data.jibunAddress;
            }

            // 사용자가 선택한 주소가 도로명 타입일때 조합한다.
            if (data.userSelectedType === 'R') {
              //법정동명이 있을 경우 추가한다.
              if (data.bname !== '') {
                extraAddr += data.bname;
              }
              // 건물명이 있을 경우 추가한다.
              if (data.buildingName !== '') {
                extraAddr +=
                  extraAddr !== ''
                    ? ', ' + data.buildingName
                    : data.buildingName;
              }
              // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
              fullAddr += extraAddr !== '' ? ' (' + extraAddr + ')' : '';
            }

            // 우편번호와 주소 정보를 해당 필드에 넣는다.
            $('#newZipCode').val(data.zonecode);
            $('#newAddress').html('[' + data.zonecode + '] ' + fullAddr);

            // 커서를 상세주소 필드로 이동한다.
            $('#newAddressDetails').val('');
            $('#newAddressDetails').focus();
            closeLyPop('daumAddress');
          },
        }).embed(element);
        showLyPop('daumAddress');
      }

      function initReservationInfo() {
        var choiceRewardLength = $('.order-list').attr('data-choiced-legnth');
        var couponKey = $('#inputCouponKey').val();
        var reservationInfo = {
          campaignId: $('#campaignId').val(),
          presenteeName: $('#presenteeName').val(),
          contactNumber: $('#contactNumber').val(),
          zipCode: $('#zipCode').val(),
          address: $('#address').val(),
          addressDetails: $('#addressDetails').val(),
          shippingMemo: $('#shippingMemo').val(),
          apid: $('#apid').val(),
          applyPoint: $('#applyPoint').val(),
          addDonation: $('#addDonation').val(),
          dontShowNameYn: $('#dontShowNameYn').val(),
          dontShowAmountYn: $('#dontShowAmountYn').val(),
          secureStateBagKey: $('[name="secureStateBagKey"]').val(),
        };

        if (couponKey) {
          reservationInfo.couponKey = couponKey;
          reservationInfo.couponDiscountAmount = $(
            '#inputCouponDiscountAmount'
          ).val();
        }

        for (var i = 0; i <= choiceRewardLength - 1; i++) {
          var rewardId = 'choiceRewards[' + i + '].rewardId';
          var qty = 'choiceRewards[' + i + '].qty';
          var sumAmount = 'choiceRewards[' + i + '].sumAmount';
          var memo = 'choiceRewards[' + i + '].memo';

          reservationInfo[rewardId] = $('[name="' + rewardId + '"]').val();
          reservationInfo[qty] = $('[name="' + qty + '"]').val();
          reservationInfo[sumAmount] = $('[name="' + sumAmount + '"]').val();
          reservationInfo[memo] = $('[name="' + memo + '"]').val();

          var choiceRewardOptions = document.querySelectorAll(
            '[name*="choiceRewards[' + i + '].choiceRewardOption"]'
          );
          for (var j = 0; j < choiceRewardOptions.length; ++j) {
            reservationInfo[choiceRewardOptions[j].name] =
              choiceRewardOptions[j].value;
          }
        }

        return reservationInfo;
      }

      /*결제예약하기*/
      function purchaseReservation() {
        try {
          dataLayer = window.dataLayer || [];

          var fundingDetail = StorageInBrazeDataController.get('fundingDetail');
          const choiceRewardPrices = [42000];
          const choiceRewardQtys = [1];
          const choiceRewardIds = [411146];
          const paymentType = $('[data-selected-pay-type]').attr(
            'data-selected-pay-type'
          );
          let paymentTypeName = '간편결제';
          if (paymentType === 'npay') {
            paymentTypeName = '네이버페이';
          }
          if (paymentType === 'dbcredit') {
            paymentTypeName = '직접입력';
          }

          dataLayer.push({
            event: 'funding-ecommerce-checkout3',
            ecommerce: {
              checkout: {
                actionField: {
                  step: 3,
                  option: paymentTypeName,
                },
                products: choiceRewardIds.map(function (item, index) {
                  return {
                    id: '158604',
                    name: '\uAC1C\uBC1C\uBE44 1.5\uC5B5\u3163\uD604\uB300\uB9AC\uBC14\uD2B8 \uAE30\uC220\uB825  \uB2F4\uC544\uB0B8 3\uB9CC\uC6D0\uB300 \uBC1C \uBC1B\uCE68\uB300 Comfy',
                    price: choiceRewardPrices[index],
                    quantity: choiceRewardQtys[index],
                    variant: item,
                    brand: '\uD604\uB300\uB9AC\uBC14\uD2B8',
                    category: fundingDetail.category,
                    coupon: fundingDetail.couponTemplateNo || undefined,
                  };
                }),
              },
            },
          });
        } catch (e) {
          console.log(e);
          if (e && window.Sentry) {
            Sentry.captureException(e);
          }
        }

        var isAllTermsChecked = false;

        Wmask.on({ spinner: true });

        var cktm04 = $('#cktm04').is(':checked');
        if (cktm04 == false) {
          alertify.alert(
            '프로젝트 진행에 대한 새소식 및 결제 관련 안내에<br>동의하셔야 결제예약이 가능합니다.',
            function () {
              $('#cktm04').focus();
            }
          );
          Wmask.off();
          return;
        }

        $('#eachTermsNoticeWrap')
          .find('input')
          .each(function (index, el) {
            if (!$(el).is(':checked')) {
              wadiz.alert(
                el.nextElementSibling.textContent +
                  '를 하셔야 결제예약이 가능합니다.',
                function () {
                  $(el).focus();
                }
              );
              Wmask.off();
              isAllTermsChecked = false;
              return false;
            }
            isAllTermsChecked = true;
          });

        if (isAllTermsChecked) {
          if (supporterCert == false) {
            wadiz.alert('휴대폰 번호를 인증해 주세요.', function () {
              $('#supporterMobileNumber').focus();
            });
            Wmask.off();
          } else {
            if (checkDelivery()) {
              if (
                isContainsEmojiFromNodeList(
                  '#presenteeName, #addressDetails, #shippingMemo'
                )
              ) {
                wadiz.alert('배송지 정보는 한글, 영문, 숫자만 입력해주세요.');
                Wmask.off();
                return false;
              }

              if (newTotalPrice == 0) {
                ajaxRequestNiceCreditPurchaseReservation();
              } else if (0 < newTotalPrice && newTotalPrice < 1000) {
                wadiz.alert('1,000원 미만은 결제가 불가능합니다.');
                Wmask.off();
              } else {
                // 결제 진행
                var selectedPayType = $('[data-selected-pay-type]').attr(
                  'data-selected-pay-type'
                );

                if (selectedPayType === 'npay') {
                  // 네이버페이 결제 취소 시 결제 데이터 유지하기 위해 form 데이터 전송
                  var form = $('#purchaseForm');
                  var fundingPrice = '42000';
                  form.append(
                    '<input type="hidden" name="totalPrice" value="' +
                      newTotalPrice +
                      '">'
                  );
                  $.ajax({
                    url: '/web/wpurchase/reward/naverpay/welcome',
                    data: $('#purchaseForm').serialize(),
                    type: 'POST',
                    success: function (result) {
                      var data = result.data;
                      var oPay = Naver.Pay.create({
                        payType: 'recurrent',
                        openType: 'page',
                        clientId: data.clientId,
                        chainId: data.chainId,
                        mode: data.mode,
                      });

                      oPay.open({
                        actionType: data.actionType,
                        productName: data.productName,
                        productCode: data.productCode,
                        totalPayAmount: data.totalPayAmount,
                        returnUrl: data.returnUrl,
                      });
                    },
                  });
                } else if (selectedPayType === 'sbcredit') {
                  Wmask.off();
                  validSimplePayInfo(
                    function () {
                      // isInfoCallback
                      var reservationInfo = initReservationInfo();
                      window.simplepay.initSimpleReservationDialog(
                        reservationInfo
                      );
                    },
                    function () {
                      // isEmptyCallback
                      wadiz.alert({
                        title:
                          '간편결제를 이용하시려면 우선 결제 정보 등록이 필요합니다.',
                        message:
                          '간편결제 등록하기 버튼을 눌러 정보등록을 진행해보세요!',
                      });
                    }
                  );
                } else {
                  // 직접 입력. selectedPayMode === 'DIRECT'
                  if (checkCardInfo()) {
                    ajaxRequestNiceCreditPurchaseReservation();
                  }
                }
              }
            }
          }
        }
      }

      // Simplepay 정보 유무 확인
      function validSimplePayInfo(isInfoCallback, isEmptyCallback) {
        $.ajax({
          method: 'post',
          url: '/web/wpurchase/cardManager/get',
        }).then(function (response) {
          if (response.data && response.data.registered) {
            isInfoCallback();
            return;
          }
          isEmptyCallback();
        });
      }

      var isSubmitted = false;

      /* 직접입력 */

      function failPayment(result) {
        var message =
          'message' in result ? result.message : '결제예약에 실패하였습니다.';
        wadiz.alert(message);
        Wmask.off();
        isSubmitted = false;
      }

      function rewardFundingSuccess(backingPaymentId) {
        try {
          trackingEventInJsp('reward.campaign.purchase.success', {
            transactionId: backingPaymentId,
            transactionAffiliation: 'wadiz.kr',
            transactionTotal: '42000',
            transactionShipping: '0',
            transactionProducts: [
              {
                id: backingPaymentId,
                name: '158604',
                category: 'RWD',
                price: '42000',
                quantity: '1',
              },
            ],
            eventCallback: function () {
              location.href =
                '/web/wpurchase/reward/result10/' + backingPaymentId;
            },
            eventTimeout: 500,
          });
        } catch (e) {
          console.log(e);
          if (e && window.Sentry) {
            Sentry.captureException(e);
          }
        }
      }

      function ajaxRequestNiceCreditPurchaseReservation() {
        if (isSubmitted) {
          wadiz.alert('처리중입니다.');
          return;
        }
        isSubmitted = true;

        $.ajax({
          url: '/web/wpurchase/reward/ajaxRequestNiceCreditPurchaseReservation',
          data: $('#purchaseForm').serialize(),
          type: 'POST',
          success: function (result) {
            if ('true' == result.success) {
              // fetch api 성공
              if (result.backingPaymentId && result.code == 'ER1102') {
                wadiz.alert(result.message).then(function () {
                  location.href =
                    '/web/wpurchase/reward/result10/' + result.backingPaymentId;
                });
                Wmask.off();
              } else if (result.backingPaymentId != 0) {
                rewardFundingSuccess(result.backingPaymentId);
              } else if (result.code == 'ER1101') {
                var campaignId = '158604';
                wadiz.alert(result.message).then(function () {
                  location.href = '/web/wpurchase/reward/step10/' + campaignId;
                });
                Wmask.off();
              } else {
                if (
                  'real' === 'local' ||
                  'real' === 'dev' ||
                  'real' === 'stg'
                ) {
                  wadiz.alert({
                    basic: true,
                    title: '카드 인증에 실패했습니다.',
                    message:
                      '실패 사유 확인 후 다시 시도해주세요.\n 참고로 DEV, STG 환경에서 국민은행 인증불가\n실패사유: ' +
                      result.message,
                    labelApprove: '확인',
                  });
                } else {
                  wadiz.alert({
                    basic: true,
                    title: '카드 인증에 실패했습니다.',
                    message:
                      '실패 사유 확인 후 다시 시도해주세요.\n실패사유: ' +
                      result.message,
                    labelApprove: '확인',
                  });
                }
                isSubmitted = false;
                Wmask.off();
              }
            } else {
              // fetch api 실패
              failPayment(result);
            }
          },
          error: function (error) {
            failPayment(error);
          },
        });
      }

      /*결제정보체크*/
      function checkCardInfo() {
        var cardNum1 = $('input[name=cardNum1]').val();
        var cardNum2 = $('input[name=cardNum2]').val();
        var cardNum3 = $('input[name=cardNum3]').val();
        var cardNum4 = $('input[name=cardNum4]').val();
        var cardExpMM = $('input[name=cardExpMM]').val();
        var cardExpYY = $('input[name=cardExpYY]').val();
        var cardPwd = $('input[name=cardPwd]').val();
        var buyerAuthNum = $('input[name=buyerAuthNum]').val();
        if (
          cardNum1.length < 4 ||
          (cardNum2 && cardNum2.length < 4) ||
          (cardNum3 && cardNum3.length < 4) ||
          cardNum4.length < 2
        ) {
          wadiz.alert(
            '신용(체크)카드 번호를 정확히 입력해주세요.',
            function () {
              $('input[name=cardNum1]').focus();
            }
          );
          $('#ckptAll').removeAttr('checked');
          Wmask.off();
          return false;
        } else if (cardExpMM.length < 2 || cardExpYY.length < 2) {
          wadiz.alert('유효기간을 정확히 입력해주세요.', function () {
            $('input[name=cardExpMM]').focus();
          });
          $('#ckptAll').removeAttr('checked');
          Wmask.off();
          return false;
        } else if (cardPwd && cardPwd.length < 2) {
          wadiz.alert('비밀번호 앞 두자리를 정확히 입력해주세요.', function () {
            $('input[name=cardPwd]').focus();
          });
          $('#ckptAll').removeAttr('checked');
          Wmask.off();
          return false;
        } else if (buyerAuthNum.length != 6 && buyerAuthNum.length != 10) {
          wadiz.alert(
            '생년월일을 정확히 입력해주세요.\n(법인카드의 경우, 사업자등록번호)',
            function () {
              $('input[name=buyerAuthNum]').focus();
            }
          );
          $('#ckptAll').removeAttr('checked');
          Wmask.off();
          return false;
        }
        return JSON.parse(
          $('#reward-simplepay-app [name="isValidForm"]').val()
        );
      }

      /*배송지정보 체크*/
      function checkDelivery() {
        var delivery = $('input[name=delivery]').is(':checked');
        if (delivery == false) {
          wadiz.alert('배송지를 선택해주세요.', function () {
            $('input[name=delivery]').focus();
          });
          Wmask.off();
          return false;
        } else if ($('#rddvNew').is(':checked')) {
          var newPresenteeName = $('#newPresenteeName').val();
          var newContactNumber = $('#newContactNumber').val();
          var newZipCode = $('#newZipCode').val();
          var newAddress = $('#newAddress').html();
          var newAddressDetails = $('#newAddressDetails').val();

          if (newPresenteeName == '') {
            wadiz.alert('신규 배송지에 받을사람을 입력하세요.', function () {
              $('#newPresenteeName').focus();
            });
            Wmask.off();
            return false;
          } else if (newContactNumber == '') {
            wadiz.alert('신규 배송지에 휴대폰 번호를 입력하세요.', function () {
              $('#newContactNumber').focus();
            });
            Wmask.off();
            return false;
          } else if (newAddress == '') {
            wadiz.alert('우편번호를 검색해서 주소를 입력하세요.', function () {
              $('#newAddressDetails').focus();
            });
            Wmask.off();
            return false;
          } else {
            $('#presenteeName').val(newPresenteeName);
            $('#contactNumber').val(newContactNumber);
            $('#zipCode').val(newZipCode);
            $('#address').val(newAddress);
            $('#addressDetails').val(newAddressDetails);
            return true;
          }
        } else {
          var shippingNo = $('input[name=delivery]:checked').val();
          var presenteeName = $('#presenteeName' + shippingNo).val();
          var contactNumber = $('#contactNumber' + shippingNo).val();
          var zipCode = $('#zipCode' + shippingNo).val();
          var address = $('#address' + shippingNo).val();
          var addressDetails = $('#addressDetails' + shippingNo).val();
          $('#presenteeName').val(presenteeName);
          $('#contactNumber').val(contactNumber);
          $('#zipCode').val(zipCode);
          $('#address').val(address);
          $('#addressDetails').val(addressDetails);
          return true;
        }
      }

      /*현재 보유 포인트 확인*/
      function setUsablePointInfo() {
        var sessionUser = '10907091018';

        if (sessionUser.length > 0) {
          $.ajax({
            url: '/web/wpoint/pointInquiry/ajaxGetMyPointInquirySummary',
            type: 'POST',
            data: { isExact: true },
            success: function (result) {
              if ('true' == result.success) {
                usablePoint = result.possessionPoint * 1;
                $('#usablePoint').html(result.possessionPoint.format()); // 보유 포인트
                $('#limitPoint').val(result.possessionPoint);
                paymentModel.limitPointPrice = usablePoint;

                if (result.possessionPoint < 100) {
                  $pointInput.attr('disabled', 'disabled');
                }
              } else {
                $('#usablePoint').html('- ');
              }
            },
          });
        }
      }

      /* 배송지 새로입력시 휴대폰 번호 유효성 추가  */
      var $contactNumber = $('#newContactNumber');
      $contactNumber.inputTelFormat(); // 전화번호 포맷 적용
      $contactNumber.on('blur', function (e) {
        var $thisInput = $(this); // 새로운 배송지 휴대폰번호 입력창
        var value = $thisInput.val(); // 입력값

        // 휴대폰 번호가 아닐 경우, 에러 표시
        var isValid = /^01([0|1|6|7|8|9]?)-?([0-9]{3,4})-?([0-9]{4})$/.test(
          value
        ); // 휴대폰번호 패턴(숫자만)
        isValid
          ? $thisInput.removeClass('error')
          : $thisInput.addClass('error');
      });

      /*숫자 타입에서 쓸 수 있도록 format() 함수 추가*/
      Number.prototype.format = function () {
        if (this == 0) return 0;
        var reg = /(^[+-]?\d+)(\d{3})/;
        var n = this + '';
        while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');
        return n;
      };

      /* 문자열 타입에서 쓸 수 있도록 format() 함수 추가*/
      String.prototype.format = function () {
        var num = parseFloat(this);
        if (isNaN(num)) return '0';
        return num.format();
      };

      /* 제 3자에 대한 개인정보 제공 동의 팝업, 책임 규정에 대한 동의 팝업 닫기 함수 */
      function closeAgreePopup(popupId) {
        var popupElId = '#' + popupId + 'CheckBox';
        closeLyPop(popupId);
        if (!$(popupElId).is(':checked')) {
          $(popupElId).prop('checked', true);
        }
        eachTermsChanged();
      }

      function acceptAllChanged(el) {
        var childInputs = $('#eachTermsNoticeWrap').find('input');
        if ($(el).is(':checked')) {
          childInputs.prop('checked', true);
        } else {
          childInputs.prop('checked', false);
        }
      }

      function eachTermsChanged() {
        var childInputs = $('#eachTermsNoticeWrap').find('input');
        var values = $(childInputs)
          .map(function () {
            return $(this).is(':checked');
          })
          .get();
        var result = values.every(function (bool) {
          return bool;
        });
        if (result) {
          $('#acceptAllCheckBox').prop('checked', true);
        } else {
          $('#acceptAllCheckBox').prop('checked', false);
        }
      }
    </script>


    <div id="adn_container" style="display: none"></div>
  </body>
</html>
