<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="http://www.thymeleaf.org"
  lang="ko"
  class="scroll-top scroll-apex"
  translate="no"
  style="--scrollbar-width: 15px">
  <head>

    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,viewport-fit=cover" />

    <title>더쉐프 회원가입</title>

    <link
        rel="stylesheet"
        href="/import/css/reward-product.cfd21a1c.css"/>

    <link
            rel="shortcut icon"
            href="/images/favicon.ico" />

    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
    <link
      rel="stylesheet"
      href="/import/css/wui.css" />
    <link
      rel="stylesheet"
      href="/import/css/layout.css" />


    <link
      rel="stylesheet"
      href="/import/css/main.b3728ebd.css" />

     <link
      rel="stylesheet"
      type="text/css"
      href="/import/css/0.5e16bda6.chunk.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/import/css/5.c60679ec.chunk.css" />
    </head>
  <body>
    <div id="page-container">
      <div class="black-bg-wrap" style="display: none"></div>

      <div th:replace="fragment/header_simple.html :: header_simple"></div>

      <main id="iam-account-app">
        <main class="SignUpIntroApp_signUpIntro__2v2wv">

          <div
            class="AccountContainer_container__PwFiE SignUpIntroApp_signUpIntroEmailContainer__3sN5d">
            <h3 class="SignUpIntroApp_simpleSignUpTitle__3aC7M">
              이메일 간편가입
            </h3>
            <form id="registForm" th:action th:object="${member}" method="post">
              <th:block th:if="${#fields.hasErrors()}">
                <input id="errorInput" type="hidden" th:value="${#fields.errors().get(0)}">
              </th:block>
            <div class="EmailSignUpFormContainer_formField__1vy9Q">

                <div class="EmailAuthField_emailAuthField__2E9P2">
                  <label class="EmailAuthField_fieldLabel__1jS_Z">이메일</label>
                  <div class="EmailAuthField_inputFieldContainer__1BgHY">
                    <div class="EmailAuthField_inputField__y3EHZ">
                      <input
                        id="emailInput"
                        th:field="*{email}"
                        name="email"
                        placeholder="이메일 계정"
                        type="email"
                        class="Input_input__2J70Z Input_md__2OZCr"
                        aria-invalid="false" />
                    </div>
                    <button
                      id="dupcheckBtn"
                      class="Button_button__2_6-I Button_primary__3fUP6 Button_contained__1T9Np Button_md__3Z8Cw Button_disabled__3zWNw EmailAuthField_cta__1K3Hz"
                      type="submit"
                      disabled="">
                      <span
                        ><span class="Button_children__weH0H"
                          >인증하기</span
                        ></span
                      >
                    </button>
                  </div>
                </div>
            </div>
              <div
                class="TextField_textField__35N7X TextField_md__3IhLK EmailSignUpFormContainer_formField__1vy9Q">
                <label>이름</label>
                <div class="TextField_field__1B2AH">
                  <input
                    th:field="*{name}"
                    id="nameInput"
                    name="nickName"
                    placeholder="이름 입력"
                    type="text"
                    class="Input_input__2J70Z Input_md__2OZCr"
                    aria-invalid="false" />
                </div>
              </div>
              <div
                      class="TextField_textField__35N7X TextField_md__3IhLK EmailSignUpFormContainer_formField__1vy9Q">
                <label>휴대폰 번호</label>
                <div class="TextField_field__1B2AH">
                  <input
                          th:field="*{phone}"
                          id="phoneInput"
                          name="nickName"
                          placeholder="휴대폰 번호 입력 (- 제외)"
                          type="tel"
                          class="Input_input__2J70Z Input_md__2OZCr"
                          aria-invalid="false" />
                </div>
              </div>
              <div
                class="TextField_textField__35N7X TextField_md__3IhLK TextField_right__1q25Y EmailSignUpFormContainer_formField__1vy9Q">
                <label>비밀번호</label>
                <div class="TextField_field__1B2AH">
                  <input
                    th:field="*{password}"
                    id="passwordInput"
                    name="password"
                    disabled=""
                    placeholder="비밀번호 입력"
                    type="password"
                    class="Input_input__2J70Z Input_md__2OZCr"
                    aria-invalid="false" /><button
                    aria-label="비밀번호 보기"
                    class="Button_button__2_6-I Button_iconOnly__2_QTY iconButton TextField_icon__2aJos TextField_endIcon__1kkIt"
                    type="button">
                    <span
                      ><span class="Button_children__weH0H"
                        ><svg
                          viewBox="0 0 48 48"
                          focusable="false"
                          role="presentation"
                          class="withIcon_icon__1YH1P"
                          aria-hidden="true">
                          <path
                            d="M23.589 7.895l.411.001c10.56 0 20.16 6.504 23.34 15.78l.132.432-.144.396c-3.216 9.168-12.816 15.6-23.328 15.6A24.84 24.84 0 0 1 .684 24.492l-.168-.432.156-.42A24.804 24.804 0 0 1 24 7.896zM24 14.46a9.6 9.6 0 1 0 0 19.2 9.6 9.6 0 0 0 0-19.2zm0 4.14a5.4 5.4 0 1 1 0 10.8 5.4 5.4 0 0 1 0-10.8z"></path></svg></span
                    ></span>
                  </button>
                </div>
              </div>
              <div
                class="TextField_textField__35N7X TextField_md__3IhLK TextField_right__1q25Y">
                <label></label>
                <div class="TextField_field__1B2AH">
                  <input
                    id="passwordCheckInput"
                    name="verifyPassword"
                    disabled=""
                    placeholder="비밀번호 확인"
                    type="password"
                    class="Input_input__2J70Z Input_md__2OZCr"
                    aria-invalid="false" /><button
                    aria-label="비밀번호 보기"
                    class="Button_button__2_6-I Button_iconOnly__2_QTY iconButton TextField_icon__2aJos TextField_endIcon__1kkIt"
                    type="button">
                    <span
                      ><span class="Button_children__weH0H"
                        ><svg
                          viewBox="0 0 48 48"
                          focusable="false"
                          role="presentation"
                          class="withIcon_icon__1YH1P"
                          aria-hidden="true">
                          <path
                            d="M23.589 7.895l.411.001c10.56 0 20.16 6.504 23.34 15.78l.132.432-.144.396c-3.216 9.168-12.816 15.6-23.328 15.6A24.84 24.84 0 0 1 .684 24.492l-.168-.432.156-.42A24.804 24.804 0 0 1 24 7.896zM24 14.46a9.6 9.6 0 1 0 0 19.2 9.6 9.6 0 0 0 0-19.2zm0 4.14a5.4 5.4 0 1 1 0 10.8 5.4 5.4 0 0 1 0-10.8z"></path></svg></span
                    ></span>
                  </button>
                </div>
              </div>

              <button
                id="registBtn"
                class="Button_button__2_6-I Button_primary__3fUP6 Button_contained__1T9Np Button_lg__2Kv4b Button_block__39TGk Button_disabled__3zWNw EmailSignUpFormContainer_signUpSubmitButton__3cZeI"
                type="submit"
                disabled="">
                <span><span class="Button_children__weH0H">완료</span></span>
              </button>
              <p class="LoginPageLink_loginPageLink__5FLoW">
                이미 더쉐프 계정이 있나요?
                <a href="/web/account/login">로그인</a>
              </p>
            </form>
          </div>
        </main>
      </main>
    </div>

    <style>
      .ab-iam-root.v3 {
        z-index: 9999;
      }
    </style>

    <div id="wadiz-waffle-toast-container-component">
      <div class="ToastContainer_container__p_SnS">
        <div id="toastBody" style="display: none" class="Toast_container__3wFZ1 Toast_show__1hB86 Toast_warning__3tC0i">
          <div class="Toast_content__2jYtA Toast_warning__3tC0i" id="toastText"></div>
        </div>
      </div>
    </div>
    <script src="/js/toast.js"></script>
  <script>
    let dupcheck = false;
    $(document).ready(function(e){

      let errorMsg = $('#errorInput').val();
      if(errorMsg !== undefined && errorMsg !== ''){
        showToast(errorMsg);
      }

        // 이메일을 입력하면
      $('#emailInput').keyup(function(e){
        dupcheck = false;
        $('#dupcheckBtn').prop("disabled", false);
        $('#dupcheckBtn').removeClass('Button_disabled__3zWNw');

        $('#passwordInput').prop('disabled',true);
        $('#passwordCheckInput').prop('disabled',true);

        $('#registBtn').prop('disabled',true);
        $('#registBtn').addClass('Button_disabled__3zWNw');
      })

      // dupcheck를 눌렀을 때
      $('#dupcheckBtn').click(function(e){
        e.preventDefault();
        let emailVal = $('#emailInput').val();
        $.ajax({
          url : '/api/account/dupCheck?email='+emailVal,
          method : 'get',
          success: function(data){
            // 이메일 사용 가능 시, 버튼 disabled
            if(data === false){
              dupcheck = true;
              $('#dupcheckBtn').prop("disabled", true);
              $('#dupcheckBtn').addClass('Button_disabled__3zWNw');

              $('#passwordInput').prop('disabled',false);
              $('#passwordCheckInput').prop('disabled',false);

              $('#registBtn').prop('disabled',false);
              $('#registBtn').removeClass('Button_disabled__3zWNw');

              showToast('사용가능한 이메일 입니다.')

            // 이메일 사용 불가능 시 toast, 1.5초 후 사라짐
            }else{
              $('#passwordInput').prop('disabled',true);
              $('#passwordCheckInput').prop('disabled',true);

              $('#registBtn').prop('disabled',true);
              $('#registBtn').addClass('Button_disabled__3zWNw');

              showToast('이미 가입된 이메일 입니다.');
            }
          }
        })
      })

      $('#registBtn').click(function(e){
        e.preventDefault();
        let emailVal = $('#emailInput').val();
        let nameVal = $('#nameInput').val();

        let passwordVal = $('#passwordInput').val();
        let passwordCheckVal = $('#passwordCheckInput').val();

        let phoneVal = $('#phoneInput').val();

        if(nameVal === ''){
          showToast('이름을 입력해주세요.');
          return;
        }

        if(phoneVal === ''){
          showToast('핸드폰 번호를 입력해주세요');
          return;
        }

        if(passwordVal.length < 4){
          showToast('비밀번호를 4자이상 입력해주세요.');
          return;
        }

        if(passwordVal !== passwordCheckVal){
          showToast('비밀번호가 일치하지 않습니다.');
          return;
        }
        $('#registForm').submit();
      })
    })
  </script>
  </body>
</html>
